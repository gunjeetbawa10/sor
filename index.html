<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>I'm Sorry, My Love</title>
  <style>
    /* ===== Base & Layout ===== */
    :root{
      --bg1:#ffdde1; /* blush */
      --bg2:#ee9ca7; /* rose */
      --ink:#2b2b2b;
      --white:#ffffff;
      --rose:#ff4d6d;
      --rose-dark:#e23c5a;
      --shadow: 0 20px 45px rgba(0,0,0,.15);
    }
    *{box-sizing:border-box}
    html,body{
      height:100%;
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background: radial-gradient(1200px 800px at 70% -10%, #fff8fa, transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }
    .wrap{
      height:100%;
      display:grid;
      place-items:center;
      padding:24px;
      position:relative;
      isolation:isolate;
    }
    .card{
      width:min(760px, 96vw);
      background:rgba(255,255,255,.92);
      backdrop-filter:saturate(130%) blur(6px);
      border-radius:28px;
      box-shadow:var(--shadow);
      padding:28px 28px 22px;
      position:relative;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.8);
    }

    /* ===== Header ===== */
    .title{
      display:flex;
      align-items:center;
      gap:12px;
      margin:4px 2px 8px;
    }
    .heart-logo{
      width:38px; height:38px; flex:0 0 auto;
      position:relative;
      filter: drop-shadow(0 4px 8px rgba(255,77,109,.35));
      animation: pop 1.2s ease-out infinite;
    }
    @keyframes pop{
      0%,100%{ transform:scale(1) rotate(-8deg); }
      50%{ transform:scale(1.08) rotate(-2deg); }
    }
    .title h1{
      font-size:clamp(22px, 4vw, 30px);
      line-height:1.2;
      margin:0;
    }
    .subtitle{
      margin:2px 2px 16px;
      color:#6b6b6b;
      font-size:clamp(14px, 2.2vw, 16px);
    }

    /* ===== Message Box ===== */
    .msg{
      background:#fff;
      border:1px solid #f6c3ce;
      border-radius:20px;
      padding:20px 18px;
      min-height:140px;
      position:relative;
      overflow:hidden;
    }
    .msg pre{
      margin:0;
      white-space:pre-wrap;
      word-wrap:break-word;
      font-family: ui-rounded, "SF Pro Rounded", system-ui, Segoe UI, Roboto, Helvetica, Arial;
      font-size:clamp(16px, 2.6vw, 18px);
      line-height:1.65;
    }

    /* ===== Actions ===== */
    .actions{
      display:flex; gap:12px; flex-wrap:wrap;
      margin-top:16px;
    }
    .btn{
      appearance:none; border:0; cursor:pointer;
      padding:12px 18px;
      border-radius:999px;
      font-weight:700;
      letter-spacing:.2px;
      transition: transform .08s ease, box-shadow .2s ease, background .2s ease;
    }
    .btn-primary{
      background:linear-gradient(135deg, var(--rose), #ff758f);
      color:var(--white);
      box-shadow:0 10px 20px rgba(255,77,109,.28);
    }
    .btn-primary:hover{ transform:translateY(-1px); }
    .btn-primary:active{ transform:translateY(0); }
    .btn-ghost{
      background:#fff; color:var(--rose-dark);
      border:1px solid #ffd6df;
    }

    /* ===== Floating Hearts (Canvas lives behind) ===== */
    canvas#hearts{
      position:absolute; inset:0; width:100%; height:100%;
      z-index:-1; pointer-events:none;
    }

    /* ===== Footer Note ===== */
    .note{
      margin-top:10px;
      font-size:12px;
      color:#777;
      text-align:center;
    }

    /* ===== Floating corner hearts ===== */
    .corner-heart{
      position:absolute; opacity:.35; pointer-events:none;
      width:22px; height:22px; transform-origin:center;
      animation: drift 8s linear infinite;
      filter: blur(.2px);
    }
    .corner-heart.h1{ top:18px; left:18px; animation-delay:-1.2s; }
    .corner-heart.h2{ bottom:18px; right:22px; animation-delay:-2.4s; }
    .corner-heart svg{ width:100%; height:100%; }
    @keyframes drift{
      0%{ transform: translateY(0) rotate(0deg) scale(1); }
      50%{ transform: translateY(-6px) rotate(8deg) scale(1.05); }
      100%{ transform: translateY(0) rotate(0deg) scale(1); }
    }

    /* ===== Small Screen Care ===== */
    @media (max-width:420px){
      .actions{ justify-content:space-between; }
      .btn{ flex:1 1 auto; text-align:center; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <canvas id="hearts"></canvas>

    <!-- soft corner hearts -->
    <div class="corner-heart h1" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="#ff4d6d"><path d="M12 21s-6.716-4.12-9.428-6.832C-.07 12.666-.33 8.84 2.11 6.4a5.5 5.5 0 0 1 7.778 0L12 8.511l2.112-2.11a5.5 5.5 0 1 1 7.778 7.778C18.716 16.88 12 21 12 21Z"/></svg>
    </div>
    <div class="corner-heart h2" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="#ff8fa3"><path d="M12 21s-6.716-4.12-9.428-6.832C-.07 12.666-.33 8.84 2.11 6.4a5.5 5.5 0 0 1 7.778 0L12 8.511l2.112-2.11a5.5 5.5 0 1 1 7.778 7.778C18.716 16.88 12 21 12 21Z"/></svg>
    </div>

    <div class="card" role="dialog" aria-label="Apology message">
      <div class="title">
        <svg class="heart-logo" viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#ff4d6d"/>
              <stop offset="1" stop-color="#ff8fa3"/>
            </linearGradient>
          </defs>
          <path fill="url(#g)" d="M12 21s-6.716-4.12-9.428-6.832C-.07 12.666-.33 8.84 2.11 6.4a5.5 5.5 0 0 1 7.778 0L12 8.511l2.112-2.11a5.5 5.5 0 1 1 7.778 7.778C18.716 16.88 12 21 12 21Z"/>
        </svg>
        <h1>I'm sorry, and I love you ‚ù§Ô∏è</h1>
      </div>
      <p class="subtitle">For the girl who is my everything.</p>

      <div class="msg" id="msg">
        <pre id="text" aria-live="polite" aria-atomic="true"></pre>
      </div>

      <div class="actions">
        <button class="btn btn-primary" id="reveal">Tap to read</button>
        <button class="btn btn-ghost" id="sendHeart" title="Shower with hearts">Send hearts</button>
      </div>

      <p class="note">P.S. When you're ready, can we talk? I want to listen to you‚Äîfully. üå∏</p>
    </div>
  </div>

  <script>
    /* ========================
       Typewriter Apology Text
       ======================== */
    const lines = [
      "My love, I'm truly sorry.",
      "I know I hurt you, and you didn't deserve that.",
      "You are my home, my calm, my favorite person.",
      "I promise to do better‚Äîmore patience, more care, more us.",
      "I love you so much. You are my everything.",
      "If your heart will let me, I'd like to make this right. üíó"
    ];

    const textEl = document.getElementById('text');
    const btnReveal = document.getElementById('reveal');

    let writing = false;
    function typeLine(line, speed=26){
      return new Promise(resolve=>{
        let i=0;
        const id = setInterval(()=>{
          textEl.textContent += line[i++];
          if(i>=line.length){ clearInterval(id); resolve(); }
        }, speed);
      });
    }
    async function writeAll(){
      if(writing) return;
      writing = true;
      textEl.textContent = "";
      for(const l of lines){
        await typeLine(l+"\n");
        await new Promise(r=>setTimeout(r, 350));
      }
      writing = false;
    }

    btnReveal.addEventListener('click', ()=>{
      writeAll();
      burstHearts(30);
      btnReveal.textContent = 'Replay';
    });

    /* ========================
       Floating Hearts (Canvas)
       ======================== */
    const canvas = document.getElementById('hearts');
    const ctx = canvas.getContext('2d');
    let W=canvas.width=window.innerWidth, H=canvas.height=window.innerHeight;

    function onResize(){
      W = canvas.width = window.innerWidth;
      H = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', onResize);

    const hearts = [];
    function makeHeart(x,y, size, vy, vx, alpha){
      return {x,y,size,vy,vx,alpha};
    }
    function drawHeart(x,y,size,alpha){
      ctx.save();
      ctx.translate(x,y);
      ctx.scale(size,size);
      ctx.globalAlpha = alpha;
      ctx.fillStyle = '#ff4d6d';
      ctx.beginPath();
      // cute heart path
      ctx.moveTo(0,0);
      ctx.bezierCurveTo(-.5,-.5, -1,.1, 0,.9);
      ctx.bezierCurveTo(1,.1, .5,-.5, 0,0);
      ctx.fill();
      ctx.restore();
    }
    function loop(){
      ctx.clearRect(0,0,W,H);
      // spawn a gentle stream
      if(Math.random() < 0.08){
        hearts.push(
          makeHeart(
            Math.random()*W,
            H + 20,
            8 + Math.random()*12,
            - (0.5 + Math.random()*1.5),
            (Math.random()-.5)*0.6,
            0.55 + Math.random()*0.35
          )
        );
      }
      for(let i=hearts.length-1;i>=0;i--){
        const h=hearts[i];
        h.x += h.vx;
        h.y += h.vy;
        h.alpha -= 0.0008;
        drawHeart(h.x, h.y, h.size/24, Math.max(0,h.alpha));
        if(h.y < -30 || h.alpha<=0) hearts.splice(i,1);
      }
      requestAnimationFrame(loop);
    }
    loop();

    // Burst of hearts on click
    function burstHearts(n=20){
      for(let i=0;i<n;i++){
        const angle = Math.random()*Math.PI*2;
        const speed = 2 + Math.random()*2.5;
        hearts.push(makeHeart(
          W/2, H/2,
          10 + Math.random()*16,
          Math.sin(angle)*-speed,
          Math.cos(angle)*speed,
          .9
        ));
      }
    }

    // Extra hearts button
    document.getElementById('sendHeart').addEventListener('click', ()=>burstHearts(40));

    // Auto start a gentle message so the page isn't empty
    setTimeout(()=>{ writeAll(); }, 500);
  </script>
</body>
</html>
